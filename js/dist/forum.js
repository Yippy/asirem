(()=>{var a={n:r=>{var o=r&&r.__esModule?()=>r.default:()=>r;return a.d(o,{a:o}),o},d:(r,o)=>{for(var e in o)a.o(o,e)&&!a.o(r,e)&&Object.defineProperty(r,e,{enumerable:!0,get:o[e]})},o:(a,r)=>Object.prototype.hasOwnProperty.call(a,r),r:a=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}},r={};(()=>{"use strict";function o(){return o=Object.assign||function(a){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(a[e]=o[e])}return a},o.apply(this,arguments)}a.r(r);const e=flarum.core.compat["common/extend"],t=flarum.core.compat["forum/components/DiscussionListItem"];var i=a.n(t);const s=flarum.core.compat["tags/components/TagsPage"];var n=a.n(s);const l=flarum.core.compat["components/IndexPage"];var c=a.n(l);const u=flarum.core.compat["components/Link"];var d=a.n(u);const g=flarum.core.compat["components/LoadingIndicator"];var p=a.n(g);const h=flarum.core.compat["helpers/listItems"];var f=a.n(h);const C=flarum.core.compat["helpers/humanTime"];var y=a.n(C);const T=flarum.core.compat["tags/common/helpers/tagIcon"];var k=a.n(T);const v=flarum.core.compat["tags/common/helpers/tagLabel"];var b=a.n(v);const B=flarum.core.compat["tags/common/utils/sortTags"];var x=a.n(B),N=function(){function a(){}return a.prototype.view=function(){if(this.loading)return m(p(),null);var a=this.tags.filter((function(a){return null!==a.position()})),r=this.tags.filter((function(a){return null===a.position()}));return m("div",{className:"Asirem-TagsPage"},c().prototype.hero(),m("div",{className:"sideNavContainer container"},m("nav",{className:"TagsPage-nav IndexPage-nav sideNav"},m("ul",null,f()(c().prototype.sidebarItems().toArray()))),m("div",{className:"TagsPage-content sideNavOffset"},m("ul",{className:"Asirem-TagTiles"},a.map((function(a){var r=a.lastPostedDiscussion(),o=x()(a.children()||[]),e=k()(a,{},{useColor:!1});return e.attrs.style&&e.attrs.style.backgroundColor&&delete e.attrs.style.backgroundColor,m("li",{className:"Asirem-TagTile "+(a.color()?"colored":""),style:{"--tag-bg":a.color()}},m(d(),{className:"Asirem-TagTile-info",href:app.route.tag(a)},m("div",{className:"Asirem-TagTile-icon"},e),m("div",{className:"Asirem-TagTile-content"},m("h3",{className:"Asirem-TagTile-name"},a.name()),m("p",{className:"Asirem-TagTile-description"},a.description()),o&&o.length?m("div",{className:"Asirem-TagTile-children"},o.map((function(a){return[m(d(),{href:app.route.tag(a),className:"TagLabel"},a.name())," "]}))):"",r?m(d(),{className:"Asirem-TagTile-lastPostedDiscussion",href:app.route.discussion(r,r.lastPostNumber())},m("span",{className:"Asirem-TagTile-lastPostedDiscussion-title"},r.title()),y()(r.lastPostedAt())):m("span",{className:"Asirem-TagTile-lastPostedDiscussion"}))))}))),r.length?m("div",{className:"Asirem-TagCloud"},r.map((function(a){return[b()(a,{link:!0})," "]}))):"")))},a}();const L=flarum.core.compat["utils/string"],P=flarum.core.compat["common/helpers/textContrastClass"];var A=a.n(P);const I=flarum.core.compat["common/utils/classList"];var R=a.n(I);const q=flarum.core.compat["common/components/Link"];var D=a.n(q);const S=flarum.core.compat["common/helpers/highlight"];var w=a.n(S);const O=flarum.core.compat["common/helpers/listItems"];var M=a.n(O);const j=flarum.core.compat["extensions/afrux-theme-base/forum/components/Footer"];var F=a.n(j);function _(a,r){var o="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(o)return(o=o.call(a)).next.bind(o);if(Array.isArray(a)||(o=function(a,r){if(a){if("string"==typeof a)return E(a,r);var o=Object.prototype.toString.call(a).slice(8,-1);return"Object"===o&&a.constructor&&(o=a.constructor.name),"Map"===o||"Set"===o?Array.from(a):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?E(a,r):void 0}}(a))||r&&a&&"number"==typeof a.length){o&&(a=o);var e=0;return function(){return e>=a.length?{done:!0}:{done:!1,value:a[e++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(a,r){(null==r||r>a.length)&&(r=a.length);for(var o=0,e=new Array(r);o<r;o++)e[o]=a[o];return e}var U={StickyNote:{isPrimaryTagBackgroundColorRequired:!1,isPrimaryTagAnButton:!1,primaryBackgroundColor:"#e8ecf3",isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"},StickyNoteTag:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"},StickyNoteFilingTag:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"},StickyNoteBanner:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!1,primaryBackgroundColor:"#e8ecf3",isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"},StickyNoteMinimal:{isPrimaryTagBackgroundColorRequired:!1,isPrimaryTagAnButton:!1,primaryBackgroundColor:"transparent",isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"},StickyNoteMinimalTag:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"},StickyNoteMinimalFilingTag:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"},StickyNoteMinimalBanner:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!1,primaryBackgroundColor:"#e8ecf3",isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"}};app.initializers.add("afrux-asirem",(function(){(0,e.extend)(i().prototype,"view",(function(a){var r=a.children.find((function(a){return a&&"div"===a.tag&&a.attrs&&a.attrs.className.includes("DiscussionListItem-content")})),e=app.forum.attribute("afrux-asirem.designDefault"),t=U[e];r.children[0]=m("div",{className:"DiscussionListItem-author-container"},[r.children[0],r.children[1]]),delete r.children[1],r.children[3]=m("div",{className:"DiscussionListItem-stats"},r.children[3]);var i=null,s=null;if(this.attrs.discussion.tags()&&this.attrs.discussion.tags().length>0){for(var n,l={tag:"span",attrs:{class:"DiscussionListItem--secondary",style:{}},children:[]},c=_(this.attrs.discussion.tags());!(n=c()).done;){var u=n.value;u.data.attributes.isChild?i=u:null==u.data.attributes.position?l.children.push(m("span",{class:"TagLabel",style:"--tag-bg:"+u.color()},m("span",{class:R()("TagLabel-text",A()(u.color()))},m("i",{class:"TagLabel-icon "+u.data.attributes.icon}),m("span",{class:"TagLabel-name"},u.data.attributes.name)))):s=u}if(s){null==i&&(i=s);var d=t.isPrimaryTagBackgroundColorRequired?s.color():t.primaryBackgroundColor;t.isPrimaryTagAnButton?r.children.push(m("span",{class:"StickyNoteMinimalFilingTag"==e||"StickyNoteFilingTag"==e?"DiscussionListItem--filingfooter":"DiscussionListItem-footer"},m("span",{class:"PrimaryTagLabel",style:"background:"+s.color()},m("span",{class:R()("PrimaryTagLabel-text",A()(s.color()))},m("i",{class:"PrimaryTagLabel-icon "+s.data.attributes.icon+" fa-1x"}),m("span",{class:"PrimaryTagLabel-name"},s.data.attributes.name))),l)):r.children.push(m("span",{class:R()("DiscussionListItem-footer",A()(d)),style:"background:"+d},m("span",{class:"DiscussionListItem--primary"},m("i",{"aria-hidden":"true",class:"TagLabel-icon "+s.data.attributes.icon+" fa-1x"}),s.data.attributes.name),l))}}var g=t.outlineBackgroundColor;switch(i&&(g=i.color()),e){case"StickyNoteFilingTag":i&&r.children.push(m("span",{class:"DiscussionListItem--outline",style:"box-shadow:inset -15px -15px 0px 0px "+g}));break;case"StickyNoteMinimal":case"StickyNoteMinimalTag":case"StickyNoteMinimalBanner":r.children.push(m("span",{class:"DiscussionListItem--outline",style:"box-shadow:inset -6px -6px 0px 0px "+g+"; height: 100%; bottom: 0;"}));break;case"StickyNoteMinimalFilingTag":if(i){r.children.push(m("span",{class:"DiscussionListItem--outline",style:"box-shadow:inset -6px -6px 0px 0px "+g+";height: calc(100% - 25px); bottom: 18px;"}));break}r.children.push(m("span",{class:"DiscussionListItem--outline",style:"box-shadow:inset -6px -6px 0px 0px "+g+"; height: 100%; bottom: 0;"}))}i?(a.attrs.style=o({background:t.isChildTagBackgroundColorRequired?i.color():t.childBackgroundColor},a.attrs.style||{}),r.children.push(m("span",{class:" DiscussionListItem--read",style:"border-color:"+(t.isOutlineTagBackgroundColorRequired?i.color():t.outlineBackgroundColor)}))):(a.attrs.style=o({background:t.childBackgroundColor},a.attrs.style||{}),r.children.push(m("span",{class:" DiscussionListItem--read",style:"border-color:"+t.outlineBackgroundColor}))),this.attrs.discussion.isUnread()&&r.children.push(m("span",{class:" DiscussionListItem--unread",style:"border-color:"+t.unreadColor})),a.attrs.className+=" "+e})),(0,e.override)(i().prototype,"mainView",(function(){var a=this.attrs.discussion,r=this.getJumpTo(),o=app.forum.attribute("afrux-asirem.designDefault"),e=U[o],t=A()(e.childBackgroundColor);if(e.isChildTagBackgroundColorRequired&&this.attrs.discussion.tags()&&this.attrs.discussion.tags().length>0){for(var i,s=null,n=null,l=_(this.attrs.discussion.tags());!(i=l()).done;){var c=i.value;c.data.attributes.isChild?s=c:c.data.attributes.position>=0&&(n=c)}s?t=A()(s.color()):n&&(t=A()(n.color()))}return m(D(),{href:app.route.discussion(a,r),className:"DiscussionListItem-main"},m("h2",{className:R()("DiscussionListItem-title-edit",t)},w()(a.title(),this.highlightRegExp)),m("ul",{className:R()("DiscussionListItem-info-edit",t)},M()(this.infoItems().toArray())))})),(0,e.extend)(i().prototype,"infoItems",(function(a){var r=null;if(this.attrs.discussion.tags()&&this.attrs.discussion.tags().length>1)for(var o,e=_(this.attrs.discussion.tags());!(o=e()).done;){var t=o.value;if(t.data.attributes.isChild){r=t;break}}if(!a.has("excerpt")){var i=this.attrs.discussion.firstPost();if(i){var s=(0,L.truncate)(i.contentPlain(),175);a.add("excerpt",m("div",null,s),-100)}}a.has("tags")&&a.remove("tags"),r?a.add("tag",m("span",{class:"TagLabel-inner"},m("center",null,m("i",{"aria-hidden":"true",class:"TagLabel-icon "+r.data.attributes.icon+" fa-1x"}),r.data.attributes.name)),-100):a.add("tag",m("span",{class:"TagLabel-inner"}),-100)})),(0,e.override)(F().prototype,"separator",(function(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1440",height:"288",className:"Asirem-footerWaves"},m("path",{"fill-opacity":"1",d:"M0,224L18.5,186.7C36.9,149,74,75,111,58.7C147.7,43,185,85,222,112C258.5,139,295,149,332,154.7C369.2,160,406,160,443,149.3C480,139,517,117,554,101.3C590.8,85,628,75,665,96C701.5,117,738,171,775,165.3C812.3,160,849,96,886,101.3C923.1,107,960,181,997,218.7C1033.8,256,1071,256,1108,250.7C1144.6,245,1182,235,1218,202.7C1255.4,171,1292,117,1329,117.3C1366.2,117,1403,171,1422,197.3L1440,224L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"}))})),(0,e.override)(n().prototype,"view",N.prototype.view)}))})(),module.exports=r})();
//# sourceMappingURL=forum.js.map