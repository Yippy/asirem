(()=>{var t={n:a=>{var e=a&&a.__esModule?()=>a.default:()=>a;return t.d(e,{a:e}),e},d:(a,e)=>{for(var s in e)t.o(e,s)&&!t.o(a,s)&&Object.defineProperty(a,s,{enumerable:!0,get:e[s]})},o:(t,a)=>Object.prototype.hasOwnProperty.call(t,a),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},a={};(()=>{"use strict";function e(){return e=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},e.apply(this,arguments)}t.r(a);const s=flarum.core.compat["common/extend"],r=flarum.core.compat["forum/components/DiscussionListItem"];var o=t.n(r);const n=flarum.core.compat["tags/components/TagsPage"];var i=t.n(n);const l=flarum.core.compat["components/IndexPage"];var c=t.n(l);const u=flarum.core.compat["components/Link"];var d=t.n(u);const g=flarum.core.compat["components/LoadingIndicator"];var p=t.n(g);const f=flarum.core.compat["helpers/listItems"];var h=t.n(f);const v=flarum.core.compat["helpers/humanTime"];var b=t.n(v);const C=flarum.core.compat["tags/common/helpers/tagIcon"];var y=t.n(C);const T=flarum.core.compat["tags/common/helpers/tagLabel"];var L=t.n(T);const N=flarum.core.compat["tags/common/utils/sortTags"];var k=t.n(N),x=function(){function t(){}return t.prototype.view=function(){if(this.loading)return m(p(),null);var t=this.tags.filter((function(t){return null!==t.position()})),a=this.tags.filter((function(t){return null===t.position()}));return m("div",{className:"Asirem-TagsPage"},c().prototype.hero(),m("div",{className:"sideNavContainer container"},m("nav",{className:"TagsPage-nav IndexPage-nav sideNav"},m("ul",null,h()(c().prototype.sidebarItems().toArray()))),m("div",{className:"TagsPage-content sideNavOffset"},m("ul",{className:"Asirem-TagTiles"},t.map((function(t){var a=t.lastPostedDiscussion(),e=k()(t.children()||[]),s=y()(t,{},{useColor:!1});return s.attrs.style&&s.attrs.style.backgroundColor&&delete s.attrs.style.backgroundColor,m("li",{className:"Asirem-TagTile "+(t.color()?"colored":""),style:{"--tag-bg":t.color()}},m(d(),{className:"Asirem-TagTile-info",href:app.route.tag(t)},m("div",{className:"Asirem-TagTile-icon"},s),m("div",{className:"Asirem-TagTile-content"},m("h3",{className:"Asirem-TagTile-name"},t.name()),m("p",{className:"Asirem-TagTile-description"},t.description()),e&&e.length?m("div",{className:"Asirem-TagTile-children"},e.map((function(t){return[m(d(),{href:app.route.tag(t),className:"TagLabel"},t.name())," "]}))):"",a?m(d(),{className:"Asirem-TagTile-lastPostedDiscussion",href:app.route.discussion(a,a.lastPostNumber())},m("span",{className:"Asirem-TagTile-lastPostedDiscussion-title"},a.title()),b()(a.lastPostedAt())):m("span",{className:"Asirem-TagTile-lastPostedDiscussion"}))))}))),a.length?m("div",{className:"Asirem-TagCloud"},a.map((function(t){return[L()(t,{link:!0})," "]}))):"")))},t}();const I=flarum.core.compat["utils/string"],A=flarum.core.compat["common/helpers/textContrastClass"];var D=t.n(A);const P=flarum.core.compat["common/utils/classList"];var w=t.n(P);const O=flarum.core.compat["common/components/Link"];var B=t.n(O);const S=flarum.core.compat["common/helpers/highlight"];var R=t.n(S);const j=flarum.core.compat["common/helpers/listItems"];var q=t.n(j);const M=flarum.core.compat["extensions/afrux-theme-base/forum/components/Footer"];var _=t.n(M);function E(t,a){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,a){if(t){if("string"==typeof t)return U(t,a);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?U(t,a):void 0}}(t))||a&&t&&"number"==typeof t.length){e&&(t=e);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function U(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,s=new Array(a);e<a;e++)s[e]=t[e];return s}var z={StickyNote:{isTagBackgroundColorRequired:!0,backgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"},StickyNoteMinimal:{isTagBackgroundColorRequired:!1,backgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"}};app.initializers.add("afrux-asirem",(function(){(0,s.extend)(o().prototype,"view",(function(t){var a=t.children.find((function(t){return t&&"div"===t.tag&&t.attrs&&t.attrs.className.includes("DiscussionListItem-content")})),s=app.forum.attribute("afrux-asirem.designDefault"),r=z[s];a.children[0]=m("div",{className:"DiscussionListItem-author-container"},[a.children[0],a.children[1]]),delete a.children[1],a.children[3]=m("div",{className:"DiscussionListItem-stats"},a.children[3]);var o=null,n=null;if(this.attrs.discussion.tags()&&this.attrs.discussion.tags().length>0){for(var i,l={tag:"span",attrs:{class:"DiscussionListItem--secondary",style:{}},children:[]},c=E(this.attrs.discussion.tags());!(i=c()).done;){var u=i.value;u.data.attributes.isChild?o=u:null==u.data.attributes.position?l.children.push(m("span",{class:"TagLabel",style:"--tag-bg:"+u.color()},m("span",{class:w()("TagLabel-text",D()(u.color()))},m("i",{class:"TagLabel-icon "+u.data.attributes.icon}),m("span",{class:"TagLabel-name"},u.data.attributes.name)))):n=u}n&&(null==o&&(o=n),a.children.push(m("span",{class:w()("DiscussionListItem-footer",D()(r.isTagBackgroundColorRequired?n.color():r.backgroundColor)),style:"background:"+(r.isTagBackgroundColorRequired?n.color():"transparent")},m("span",{class:"DiscussionListItem--primary"},m("i",{"aria-hidden":"true",class:"TagLabel-icon "+n.data.attributes.icon+" fa-1x"}),n.data.attributes.name),l)))}o?(t.attrs.style=e({background:r.isTagBackgroundColorRequired?o.color():r.backgroundColor},t.attrs.style||{}),a.children.push(m("span",{class:" DiscussionListItem--read",style:"border-color:"+(r.isOutlineTagBackgroundColorRequired?o.color():r.outlineBackgroundColor)}))):(t.attrs.style=e({background:r.backgroundColor},t.attrs.style||{}),a.children.push(m("span",{class:" DiscussionListItem--read",style:"border-color:"+r.outlineBackgroundColor}))),this.attrs.discussion.isUnread()&&a.children.push(m("span",{class:" DiscussionListItem--unread",style:"border-color:"+r.unreadColor})),t.attrs.className+=" "+s,"StickyNoteMinimal"==s&&(a.attrs.style={"box-shadow":"inset -6px -6px 0px 0px "+o.color()})})),(0,s.override)(o().prototype,"mainView",(function(){var t=this.attrs.discussion,a=this.getJumpTo(),e=app.forum.attribute("afrux-asirem.designDefault"),s=z[e],r=D()(s.backgroundColor);if(s.isTagBackgroundColorRequired&&this.attrs.discussion.tags()&&this.attrs.discussion.tags().length>0){for(var o,n=null,i=null,l=E(this.attrs.discussion.tags());!(o=l()).done;){var c=o.value;c.data.attributes.isChild?n=c:c.data.attributes.position>=0&&(i=c)}n?r=D()(n.color()):i&&(r=D()(i.color()))}return m(B(),{href:app.route.discussion(t,a),className:"DiscussionListItem-main"},m("h2",{className:w()("DiscussionListItem-title-edit",r)},R()(t.title(),this.highlightRegExp)),m("ul",{className:w()("DiscussionListItem-info-edit",r)},q()(this.infoItems().toArray())))})),(0,s.extend)(o().prototype,"infoItems",(function(t){var a=null;if(this.attrs.discussion.tags()&&this.attrs.discussion.tags().length>1)for(var e,s=E(this.attrs.discussion.tags());!(e=s()).done;){var r=e.value;if(r.data.attributes.isChild){a=r;break}}if(!t.has("excerpt")){var o=this.attrs.discussion.firstPost();if(o){var n=(0,I.truncate)(o.contentPlain(),175);t.add("excerpt",m("div",null,n),-100)}}t.has("tags")&&t.remove("tags"),a?t.add("tag",m("span",{class:"TagLabel-inner"},m("center",null,m("i",{"aria-hidden":"true",class:"TagLabel-icon "+a.data.attributes.icon+" fa-1x"}),a.data.attributes.name)),-100):t.add("tag",m("span",{class:"TagLabel-inner"}),-100)})),(0,s.override)(_().prototype,"separator",(function(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1440",height:"288",className:"Asirem-footerWaves"},m("path",{"fill-opacity":"1",d:"M0,224L18.5,186.7C36.9,149,74,75,111,58.7C147.7,43,185,85,222,112C258.5,139,295,149,332,154.7C369.2,160,406,160,443,149.3C480,139,517,117,554,101.3C590.8,85,628,75,665,96C701.5,117,738,171,775,165.3C812.3,160,849,96,886,101.3C923.1,107,960,181,997,218.7C1033.8,256,1071,256,1108,250.7C1144.6,245,1182,235,1218,202.7C1255.4,171,1292,117,1329,117.3C1366.2,117,1403,171,1422,197.3L1440,224L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"}))})),(0,s.override)(i().prototype,"view",x.prototype.view)}))})(),module.exports=a})();
//# sourceMappingURL=forum.js.map